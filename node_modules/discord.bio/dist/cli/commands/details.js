"use strict";
const __1 = require("../..");
const colors_1 = require("colors");
const bio = new __1.Bio();
async function details(slug) {
    const profile = await bio.users.details(slug)
        .catch((error) => {
        if (error.statusCode === 404)
            console.error(`Profile "${slug}" not found.`);
        else
            console.error(error);
        process.exit(1);
    });
    const { details, userConnections, discordConnections } = profile.user;
    const flags = [];
    for (const [key, value] of Object.entries(profile.discord.public_flags.serialize())) {
        if (value)
            flags.push(key.replace(/_/g, ' ').toLowerCase());
    }
    console.log(colors_1.bold(profile.discord.tag + `(${details.slug})`));
    console.log(colors_1.bold(`â†‘ ${details.upvotes} upvotes`));
    console.log('');
    console.log(colors_1.bold('Description:') + ' ' + details.description);
    console.log(colors_1.bold('User ID:') + profile.discord.id);
    console.log(colors_1.bold(`Flags: `) + (flags.join(', ') || '(none)'));
    console.log(colors_1.bold('Details'));
    const info = ['location', 'gender', 'birthday', 'email', 'createdAt', 'occupation', 'verified', 'staff'];
    const data = {};
    for (const key of info) {
        if (details[key])
            data[key] = { value: details[key] };
    }
    console.table(data);
    const dconnections_data = {};
    for (const connection of discordConnections) {
        dconnections_data[connection.name] = {
            'Connection type': connection.connection_type,
            'URL': connection.url,
            'icon': connection.icon
        };
    }
    console.log(colors_1.bold('Discord Connections'));
    console.table(dconnections_data);
    let uConnections_data = {};
    for (const [key, value] of Object.entries(userConnections)) {
        if (value)
            uConnections_data[key] = { value: value };
    }
    if (uConnections_data) {
        console.log(colors_1.bold('User Connections'));
        console.table(uConnections_data);
    }
}
module.exports = details;
//# sourceMappingURL=details.js.map